import{_ as a,c as e,o as t,a2 as o}from"./chunks/framework.CWo5xHl-.js";const f=JSON.parse('{"title":"6. HTTP 首部","description":"","frontmatter":{},"headers":[],"relativePath":"network/http-header.md","filePath":"network/http-header.md"}'),r={name:"network/http-header.md"},i=o('<h1 id="_6-http-首部" tabindex="-1">6. HTTP 首部 <a class="header-anchor" href="#_6-http-首部" aria-label="Permalink to &quot;6. HTTP 首部&quot;">​</a></h1><h2 id="_6-1-http-报文首部" tabindex="-1">6.1. HTTP 报文首部 <a class="header-anchor" href="#_6-1-http-报文首部" aria-label="Permalink to &quot;6.1. HTTP 报文首部&quot;">​</a></h2><p>HTTP 报文：报文首部 + 空行 + 报文主体</p><h2 id="_6-2-http-首部字段" tabindex="-1">6.2. HTTP 首部字段 <a class="header-anchor" href="#_6-2-http-首部字段" aria-label="Permalink to &quot;6.2. HTTP 首部字段&quot;">​</a></h2><p>HTTP 首部字段：首部字段名 + “:” + 空格 + 首部字段值。例如：Content-Type: text/html。</p><p>HTTP 首部字段分为 4 种类型：通用首部字段、请求首部字段、响应首部字段、实体首部字段。</p><p>HTTP 首部字段将定义成缓存代理和非缓存代理的行为，分为 2 种类型。</p><p><strong>端到端首部</strong> 该类首部会转发给请求/响应的最终接收方，且必须保存在缓存生成的响应中，另规定它必须被转发。</p><p><strong>逐跳首部</strong> 该类首部只对单次转发有效，会因为缓存或代理不再转发。 HTTP/1.1 及以后，该类首部，需要提供 Connection 首部字段。</p><p>除了这 8 个首部字段外，其他所有字段都属于端到端首部。</p><ul><li>Connection</li><li>Keep-Alive</li><li>Proxy-Authenticate</li><li>Proxy-Authorization</li><li>Trailer</li><li>TE</li><li>Transfer-Encoding</li><li>Upgrade</li></ul><h2 id="_6-3-通用首部字段" tabindex="-1">6.3. 通用首部字段 <a class="header-anchor" href="#_6-3-通用首部字段" aria-label="Permalink to &quot;6.3. 通用首部字段&quot;">​</a></h2><h3 id="_6-3-1-cache-control" tabindex="-1">6.3.1. Cache-Control <a class="header-anchor" href="#_6-3-1-cache-control" aria-label="Permalink to &quot;6.3.1. Cache-Control&quot;">​</a></h3><p>Cache-Control 首部字段定义了请求/响应遵循的缓存机制。</p><p>缓存请求指令：</p><ul><li>no-cache：强制向源服务器再次验证</li><li>no-store：不缓存请求或响应的任何内容</li><li>max-age：响应的最大 Age 值</li><li>max-stale：接收已过期的响应</li><li>min-fresh：期望在指定时间内的响应仍有效</li><li>no-transform：代理不可更改媒体类型</li><li>only-if-cached：从缓存获取资源</li><li>cache-extension：扩展指令</li></ul><p>缓存响应指令：</p><ul><li>public：可向任意方提供响应的缓存</li><li>private：仅向特定用户返回响应</li><li>no-cache：缓存前必须先确认其有效</li><li>no-store：不缓存请求或响应的任何内容</li><li>max-age：响应的最大 Age 值</li><li>s-maxage：公共缓存服务器响应的最大 Age 值</li><li>no-transform：代理不可更改媒体类型</li><li>must-revalidate：可缓存但必须再向源服务器进行确认</li><li>proxy-revalidate：代理服务器可缓存但必须再向源服务器进行确认</li><li>cache-extension：扩展指令</li></ul><p><strong>public &amp; private 指令</strong></p><p>public：响应可以被任何方缓存，包括客户端、代理服务器、中间网关。</p><p>private：响应只能被客户端缓存，中间网关不可缓存。</p><p><strong>no-cache &amp; no-store 指令</strong></p><p>no-cache：缓存前必须先确认其有效。客户端发送的请求如果包含该指令，表示客户端不会接收缓存过的响应，中间缓存服务器必须把客户端请求转发给源服务器。服务器返回的响应如果包含该指令，那么缓存服务器不能对资源进行缓存。</p><p>no-store：不缓存请求或响应的任何内容。</p><p><strong>s-maxage &amp; max-age 指令</strong></p><p>这两个指令功能相同，s-maxage 只适用于供多位用户使用的公共缓存服务器。s-maxage 优先级高于 max-age。</p><p>当客户端发送请求包含 max-age 指令时，如果判定缓存资源时间数值比其数值小，那么客户端接收缓存资源。当 max-age 为 0，缓存服务器通常需要将请求转发给源服务器。</p><p>当服务端返回响应包含 max-age 指令时，缓存服务器将不对资源的有效性进行确认。</p><blockquote><p>响应头中的 max-age：服务器指示客户端响应数据可以缓存多长时间。</p><p>请求头中的 max-age：客户端指示服务器自己愿意接受多旧的缓存数据。</p></blockquote><p>HTTP/1.1 服务器会优先处理 max-age，忽略 Expires。 1.0 版本相反。</p><h3 id="_6-3-2-connection" tabindex="-1">6.3.2. Connection <a class="header-anchor" href="#_6-3-2-connection" aria-label="Permalink to &quot;6.3.2. Connection&quot;">​</a></h3><p>该首部字段具备如下两个作用：</p><ul><li>管理持久连接（HTTP/1.1 默认持久连接，旧版本需要设置值为 Keep-Alive）</li><li>控制不再转发给代理的首部字段（Connection 定义的字段会被删除后再转发）</li></ul><h3 id="_6-3-3-date" tabindex="-1">6.3.3. Date <a class="header-anchor" href="#_6-3-3-date" aria-label="Permalink to &quot;6.3.3. Date&quot;">​</a></h3><p>Date 首部字段表示创建 HTTP 报文的日期和时间。</p><h3 id="_6-3-4-pragma" tabindex="-1">6.3.4. Pragma <a class="header-anchor" href="#_6-3-4-pragma" aria-label="Permalink to &quot;6.3.4. Pragma&quot;">​</a></h3><p>HTTP/1.1 之前版本的历史遗留字段，形式唯一：Pragma: no-cache。只能在客户端发送的请求中，要求中间服务器不返回缓存资源。</p><h3 id="_6-3-5-trailer" tabindex="-1">6.3.5. Trailer <a class="header-anchor" href="#_6-3-5-trailer" aria-label="Permalink to &quot;6.3.5. Trailer&quot;">​</a></h3><p>Trailer 会事先说明在报文主体后记录了哪些首部字段。可应用在分块传输编码时。</p><h3 id="_6-3-6-transfer-encoding" tabindex="-1">6.3.6. Transfer-Encoding <a class="header-anchor" href="#_6-3-6-transfer-encoding" aria-label="Permalink to &quot;6.3.6. Transfer-Encoding&quot;">​</a></h3><p>规定传输报文主体时采用的编码方式。</p><h3 id="_6-3-7-upgrade" tabindex="-1">6.3.7. Upgrade <a class="header-anchor" href="#_6-3-7-upgrade" aria-label="Permalink to &quot;6.3.7. Upgrade&quot;">​</a></h3><p>用于检测 HTTP 协议/其他协议的升级。</p><h3 id="_6-3-8-via" tabindex="-1">6.3.8. Via <a class="header-anchor" href="#_6-3-8-via" aria-label="Permalink to &quot;6.3.8. Via&quot;">​</a></h3><p>追踪客户端与服务器之间的请求和响应报文传输路径。</p><h3 id="_6-3-9-warning" tabindex="-1">6.3.9. Warning <a class="header-anchor" href="#_6-3-9-warning" aria-label="Permalink to &quot;6.3.9. Warning&quot;">​</a></h3><p>通常会告知用户一些与缓存相关的问题的警告，今后可能会追加更多的警告代码。</p><h2 id="_6-4-请求首部字段" tabindex="-1">6.4. 请求首部字段 <a class="header-anchor" href="#_6-4-请求首部字段" aria-label="Permalink to &quot;6.4. 请求首部字段&quot;">​</a></h2><h3 id="_6-4-1-accept" tabindex="-1">6.4.1. Accept <a class="header-anchor" href="#_6-4-1-accept" aria-label="Permalink to &quot;6.4.1. Accept&quot;">​</a></h3><p>Accept 首部字段用于指定客户端可接受的媒体类型。可以指定媒体类型的相对优先级（权重值 q）。</p><p>使用 q 用分号(;)进行分隔，范围是 0~1(可精确到小数点 后 3 位)，且 1 为最大值。不指定权重 q 值时，默认权重为 q=1.0。</p><blockquote><p>例: Accept: text/plain; q=0.3, text/html</p><p>优先接收 HTML 格式，其次接收纯文本。</p></blockquote><h3 id="_6-4-2-accept-charset" tabindex="-1">6.4.2. Accept-Charset <a class="header-anchor" href="#_6-4-2-accept-charset" aria-label="Permalink to &quot;6.4.2. Accept-Charset&quot;">​</a></h3><p>通知服务器用户代理支持的字符集及字符集的相对优先级。与首部字 段 Accept 相同的是可用权重 q 值来表示相对优先级。</p><h3 id="_6-4-3-accept-encoding" tabindex="-1">6.4.3. Accept-Encoding <a class="header-anchor" href="#_6-4-3-accept-encoding" aria-label="Permalink to &quot;6.4.3. Accept-Encoding&quot;">​</a></h3><p>告知服务器用户代理支持的内容编码及内容编码的优先级顺序。可一次性指定多种内容编码。采用权重 q 值来表示相对优先级。</p><h3 id="_6-4-4-accept-language" tabindex="-1">6.4.4. Accept-Language <a class="header-anchor" href="#_6-4-4-accept-language" aria-label="Permalink to &quot;6.4.4. Accept-Language&quot;">​</a></h3><p>告知服务器用户代理支持的语言及语言相对优先级。采用权重 q 值来表示相对优先级。</p><h3 id="_6-4-5-authorization" tabindex="-1">6.4.5. Authorization <a class="header-anchor" href="#_6-4-5-authorization" aria-label="Permalink to &quot;6.4.5. Authorization&quot;">​</a></h3><p>告知服务器用户代理的认证信息。</p><h3 id="_6-4-6-expect" tabindex="-1">6.4.6. Expect <a class="header-anchor" href="#_6-4-6-expect" aria-label="Permalink to &quot;6.4.6. Expect&quot;">​</a></h3><p>客户端可通知服务器期望出现的某种特定行为。</p><h3 id="_6-4-7-from" tabindex="-1">6.4.7. From <a class="header-anchor" href="#_6-4-7-from" aria-label="Permalink to &quot;6.4.7. From&quot;">​</a></h3><p>告知服务器用户的电子邮箱地址。</p><h3 id="_6-4-8-host" tabindex="-1">6.4.8. Host <a class="header-anchor" href="#_6-4-8-host" aria-label="Permalink to &quot;6.4.8. Host&quot;">​</a></h3><p>告知服务器请求资源所在的主机名和端口号。</p><h3 id="_6-4-9-if-match" tabindex="-1">6.4.9. If-Match <a class="header-anchor" href="#_6-4-9-if-match" aria-label="Permalink to &quot;6.4.9. If-Match&quot;">​</a></h3><p>与 ETag 首部字段配合使用，根据实体标签（ETag）判断是否缓存命中。If-Match 的字段值跟 ETag 值一致时，才会执行请求，反之，则返回 412 状态码。</p><blockquote><p>形如 If-xxx 这种样式的请求首部字段，都可称为条件请求。服务器接 收到附带条件的请求后，只有判断指定条件为真时，才会执行请求。</p></blockquote><h3 id="_6-4-10-if-modified-since" tabindex="-1">6.4.10. If-Modified-Since <a class="header-anchor" href="#_6-4-10-if-modified-since" aria-label="Permalink to &quot;6.4.10. If-Modified-Since&quot;">​</a></h3><p>与 Last-Modified 首部字段配合使用，根据时间判断是否缓存命中。If-Modified-Since 的字段值早于资源的更新时间，才会执行请求，反之，则返回 304 状态码。</p><h3 id="_6-4-11-if-none-match" tabindex="-1">6.4.11. If-None-Match <a class="header-anchor" href="#_6-4-11-if-none-match" aria-label="Permalink to &quot;6.4.11. If-None-Match&quot;">​</a></h3><p>与 If-Match 作用相反。当该字段与 ETag 不一致时，才执行请求。</p><h3 id="_6-4-12-if-range" tabindex="-1">6.4.12. If-Range <a class="header-anchor" href="#_6-4-12-if-range" aria-label="Permalink to &quot;6.4.12. If-Range&quot;">​</a></h3><p>If-Range 字段值（ETag 值或者时间）和请求资源的 ETag 值或时间一致时，则作为范围请求处理。反之，则返回全体资源。</p><h3 id="_6-4-13-if-unmodified-since" tabindex="-1">6.4.13. If-Unmodified-Since <a class="header-anchor" href="#_6-4-13-if-unmodified-since" aria-label="Permalink to &quot;6.4.13. If-Unmodified-Since&quot;">​</a></h3><p>与 If-Modified-Since 作用相反。If-Unmodified-Since 的字段值早于资源的更新时间，才会执行请求，反之，则返回 412 状态码。</p><h3 id="_6-4-14-max-forwards" tabindex="-1">6.4.14. Max-Forwards <a class="header-anchor" href="#_6-4-14-max-forwards" aria-label="Permalink to &quot;6.4.14. Max-Forwards&quot;">​</a></h3><p>告知服务器，请求被转发时，允许请求者最多可经过的节点数。</p><h3 id="_6-4-15-proxy-authorization" tabindex="-1">6.4.15. Proxy-Authorization <a class="header-anchor" href="#_6-4-15-proxy-authorization" aria-label="Permalink to &quot;6.4.15. Proxy-Authorization&quot;">​</a></h3><p>与 Authorization 字段类似，但只限于代理服务器。</p><h3 id="_6-4-16-range" tabindex="-1">6.4.16. Range <a class="header-anchor" href="#_6-4-16-range" aria-label="Permalink to &quot;6.4.16. Range&quot;">​</a></h3><p>告知服务器返回资源的指定部分。</p><h3 id="_6-4-17-referer" tabindex="-1">6.4.17. Referer <a class="header-anchor" href="#_6-4-17-referer" aria-label="Permalink to &quot;6.4.17. Referer&quot;">​</a></h3><p>告知服务器请求的原始资源的 URI。</p><h3 id="_6-4-18-te" tabindex="-1">6.4.18. TE <a class="header-anchor" href="#_6-4-18-te" aria-label="Permalink to &quot;6.4.18. TE&quot;">​</a></h3><p>告知服务器希望接受的传输编码方式及相对优先级。可一次性指定多种内容编码方式。采用权重 q 值来表示相对优先级。</p><h3 id="_6-4-19-user-agent" tabindex="-1">6.4.19. User-Agent <a class="header-anchor" href="#_6-4-19-user-agent" aria-label="Permalink to &quot;6.4.19. User-Agent&quot;">​</a></h3><p>告知服务器用户代理程序的名称与版本。</p><h2 id="_6-5-响应首部字段" tabindex="-1">6.5. 响应首部字段 <a class="header-anchor" href="#_6-5-响应首部字段" aria-label="Permalink to &quot;6.5. 响应首部字段&quot;">​</a></h2><h3 id="_6-5-1-accept-ranges" tabindex="-1">6.5.1. Accept-Ranges <a class="header-anchor" href="#_6-5-1-accept-ranges" aria-label="Permalink to &quot;6.5.1. Accept-Ranges&quot;">​</a></h3><p>表明服务器是否能处理范围请求。可处理指定其为 bytes，反之则为 none。</p><h3 id="_6-5-2-age" tabindex="-1">6.5.2. Age <a class="header-anchor" href="#_6-5-2-age" aria-label="Permalink to &quot;6.5.2. Age&quot;">​</a></h3><p>告知客户端，源服务器在多久前创建了响应。</p><h3 id="_6-5-3-etag" tabindex="-1">6.5.3. ETag <a class="header-anchor" href="#_6-5-3-etag" aria-label="Permalink to &quot;6.5.3. ETag&quot;">​</a></h3><p>ETag 告知客户端实体标识。它是一种将资源以字符串形式做唯一标识的方式。</p><p>强 ETag：不论实体发生多么细微的变化，都会改变其值。强 ETag 通常是基于文件的内容、最后修改时间、文件大小等属性进行计算的。具体的计算方法因服务器的实现而异</p><p>弱 ETag：只有资源发生根本改变，产生差异时才会改变。</p><h3 id="_6-5-4-location" tabindex="-1">6.5.4. Location <a class="header-anchor" href="#_6-5-4-location" aria-label="Permalink to &quot;6.5.4. Location&quot;">​</a></h3><p>用于重定向，或者用于新资源创建。</p><h3 id="_6-5-5-proxy-authenticate" tabindex="-1">6.5.5. Proxy-Authenticate <a class="header-anchor" href="#_6-5-5-proxy-authenticate" aria-label="Permalink to &quot;6.5.5. Proxy-Authenticate&quot;">​</a></h3><p>与 Authorization 字段类似，但只限于代理服务器。</p><h3 id="_6-5-6-retry-after" tabindex="-1">6.5.6. Retry-After <a class="header-anchor" href="#_6-5-6-retry-after" aria-label="Permalink to &quot;6.5.6. Retry-After&quot;">​</a></h3><p>告知客户端应该在多久之后再次发送请求。</p><h3 id="_6-5-7-server" tabindex="-1">6.5.7. Server <a class="header-anchor" href="#_6-5-7-server" aria-label="Permalink to &quot;6.5.7. Server&quot;">​</a></h3><p>告知客户端当前服务器上安装的 HTTP 应用程序的信息。</p><h3 id="_6-5-8-vary" tabindex="-1">6.5.8. Vary <a class="header-anchor" href="#_6-5-8-vary" aria-label="Permalink to &quot;6.5.8. Vary&quot;">​</a></h3><p>指定获取资源时，相同字段值才能直接从缓存返回响应。</p><h3 id="_6-5-9-www-authenticate" tabindex="-1">6.5.9. WWW-Authenticate <a class="header-anchor" href="#_6-5-9-www-authenticate" aria-label="Permalink to &quot;6.5.9. WWW-Authenticate&quot;">​</a></h3><p>用于 HTTP 访问认证。</p><h2 id="_6-6-实体首部字段" tabindex="-1">6.6. 实体首部字段 <a class="header-anchor" href="#_6-6-实体首部字段" aria-label="Permalink to &quot;6.6. 实体首部字段&quot;">​</a></h2><h3 id="_6-6-1-allow" tabindex="-1">6.6.1. Allow <a class="header-anchor" href="#_6-6-1-allow" aria-label="Permalink to &quot;6.6.1. Allow&quot;">​</a></h3><p>通知客户端能够支持 Request-URI 指定资源的所有 HTTP 方法。当服务端不支持请求方法时，会返回 405 状态码。</p><h3 id="_6-6-2-content-encoding" tabindex="-1">6.6.2. Content-Encoding <a class="header-anchor" href="#_6-6-2-content-encoding" aria-label="Permalink to &quot;6.6.2. Content-Encoding&quot;">​</a></h3><p>告知客户端实体主体采用何种内容编码方式。</p><h3 id="_6-6-3-content-language" tabindex="-1">6.6.3. Content-Language <a class="header-anchor" href="#_6-6-3-content-language" aria-label="Permalink to &quot;6.6.3. Content-Language&quot;">​</a></h3><p>告知客户端实体主体使用的语言。</p><h3 id="_6-6-4-content-length" tabindex="-1">6.6.4. Content-Length <a class="header-anchor" href="#_6-6-4-content-length" aria-label="Permalink to &quot;6.6.4. Content-Length&quot;">​</a></h3><p>告知客户端实体主体部分字节大小。</p><h3 id="_6-6-5-content-location" tabindex="-1">6.6.5. Content-Location <a class="header-anchor" href="#_6-6-5-content-location" aria-label="Permalink to &quot;6.6.5. Content-Location&quot;">​</a></h3><p>给出报文主体部分相对应的 URI。</p><h3 id="_6-6-6-content-md5" tabindex="-1">6.6.6. Content-MD5 <a class="header-anchor" href="#_6-6-6-content-md5" aria-label="Permalink to &quot;6.6.6. Content-MD5&quot;">​</a></h3><p>实体主体的报文摘要，用于校验实体主体是否发生变化。</p><h3 id="_6-6-7-content-range" tabindex="-1">6.6.7. Content-Range <a class="header-anchor" href="#_6-6-7-content-range" aria-label="Permalink to &quot;6.6.7. Content-Range&quot;">​</a></h3><p>告知客户端返回实体的部分范围请求。</p><h3 id="_6-6-8-content-type" tabindex="-1">6.6.8. Content-Type <a class="header-anchor" href="#_6-6-8-content-type" aria-label="Permalink to &quot;6.6.8. Content-Type&quot;">​</a></h3><p>告知客户端实体主体内对象的媒体类型。</p><h3 id="_6-6-9-expires" tabindex="-1">6.6.9. Expires <a class="header-anchor" href="#_6-6-9-expires" aria-label="Permalink to &quot;6.6.9. Expires&quot;">​</a></h3><p>告知客户端实体主体在什么时候过期。</p><h3 id="_6-6-10-last-modified" tabindex="-1">6.6.10. Last-Modified <a class="header-anchor" href="#_6-6-10-last-modified" aria-label="Permalink to &quot;6.6.10. Last-Modified&quot;">​</a></h3><p>告知客户端实体最终修改的时间。</p><h2 id="_6-7-cookie-相关的首部字段" tabindex="-1">6.7 Cookie 相关的首部字段 <a class="header-anchor" href="#_6-7-cookie-相关的首部字段" aria-label="Permalink to &quot;6.7 Cookie 相关的首部字段&quot;">​</a></h2><p>Set-Cookie 响应首部字段，管理 Cookie 信息。</p><p>Cookie 请求首部字段，服务端接收到的 Cookie 信息。</p><h3 id="_6-7-1-set-cookie" tabindex="-1">6.7.1. Set-Cookie <a class="header-anchor" href="#_6-7-1-set-cookie" aria-label="Permalink to &quot;6.7.1. Set-Cookie&quot;">​</a></h3><p><strong>expires 属性</strong></p><p>发送 Cookie 的有效期。</p><p><strong>path 属性</strong></p><p>限制 Cookie 的发送范围的文件目录。</p><p><strong>domain 属性</strong></p><p>限制 Cookie 的发送范围的主机名。</p><p><strong>secure 属性</strong></p><p>限制 Web 页面仅在 HTTPS 安全通道发送 Cookie。</p><p><strong>HttpOnly 属性</strong></p><p>使得 JS 脚本无法读取 Cookie。防止 XSS 攻击。</p><h3 id="_6-7-2-cookie" tabindex="-1">6.7.2. Cookie <a class="header-anchor" href="#_6-7-2-cookie" aria-label="Permalink to &quot;6.7.2. Cookie&quot;">​</a></h3><p>告知服务器 Cookie 信息。</p><h2 id="_6-8-其他首部字段" tabindex="-1">6.8. 其他首部字段 <a class="header-anchor" href="#_6-8-其他首部字段" aria-label="Permalink to &quot;6.8. 其他首部字段&quot;">​</a></h2><ul><li>X-Frame-Options：控制网站内容在其他 Web 网站的 Frame 标签内的显示。DENY 代表不允许任何网站 frame 加载，SAMEORIGIN 代表同源域名 frame 可以加载该页面。防止点击劫持。</li><li>X-XSS-Protection：启用或关闭 XSS 过滤。</li><li>DNT：Do Not Track 请求首部字段，告知服务器用户是否愿意接收来自浏览器的跟踪信息。</li></ul>',149),n=[i];function h(l,c,p,d,s,u){return t(),e("div",null,n)}const q=a(r,[["render",h]]);export{f as __pageData,q as default};
